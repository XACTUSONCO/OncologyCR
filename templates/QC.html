{% load static %}
<!doctype html>
<html lang="ko">

<head>

	<meta charset="utf-8" />
	<title>X-OncoTrack</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- <meta name="viewport" content="width=1024px"> -->
	<meta content="임상시험 관리 시스템" name="description" />
	<meta name="keywords" content="임상시험 관리 시스템">
	<meta name="format-detection" content="telephone=no">
	<meta content="임상시험 관리 시스템" property="og:description">
	<meta name="author" content="임상시험 관리 시스템">

	<!-- App favicon -->
	<link rel="shortcut icon" href="{% static 'assets/images/favicon.ico' %}">

	<!-- Bootstrap Css -->
	<link href="{% static 'assets/css/bootstrap.min.css' %}" id="bootstrap-style" rel="stylesheet" type="text/css" />
	<link href="{% static 'assets/css/bootstrap-icons.css' %}" rel="stylesheet" type="text/css" />

	<!-- Icons Css -->
	<link href="{% static 'assets/css/icons.min.css' %}" rel="stylesheet" type="text/css" />

	<!-- Layout  Css -->
	<link href="{% static 'assets/css/layout.min.css' %}" rel="stylesheet" type="text/css" />

	<!-- Plugin  Css -->
	<link href="{% static 'assets/css/plugins.css' %}" rel="stylesheet" type="text/css" />

	<!-- Style Css -->
	<link href="{% static 'assets/css/style.css' %}" rel="stylesheet" type="text/css" />

</head>


<body>
{% with job_title=user.groups.all.0.name %}

<!-- <body data-layout="horizontal"> -->

<!-- Begin page -->
<div id="layout-wrapper">

	<header id="page-topbar">
		<div class="navbar-header">
			<div class="d-flex">
				<button type="button" class="btn btn-sm px-3 font-size-16 header-item vertical-menu-btn">
					<i class="fa fa-fw fa-bars"></i><!-- fa fa-fw fa-bars -->
				</button>
			</div>

			<!-- s : My 계정 정보/로그아웃 -->
			<div class="d-flex align-items-center">
				<div class="dropdown d-inline-block">
					<button type="button" class="btn header-item user text-start d-flex align-items-center" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<img class="rounded-circle header-profile-user" src="{% static 'assets/images/users/avatar-1.jpg' %}" alt="profile">
						<span class="ms-2 d-none d-sm-block user-item-desc ">
							<span class="user-name">{{ user.first_name }} {{ job_title }}</span>
						</span>
						<i class="bi bi-chevron-down ms-2"></i>
					</button>
					<div class="dropdown-menu dropdown-menu-end pt-0 pb-0">
						<div class="p-3 bg-success border-bottom rounded-top text-center">
							<img class="rounded-circle img-sm" src="{% static 'assets/images/users/avatar-1.jpg' %}" alt="profile">
							<h6 class="text-white fs-5 mt-3 mb-1">{{ user.first_name }} {{ job_title }}</h6>
							<p class="mb-0 font-size-11 text-white-50 fw-semibold">{{ user.email }}</p>
						</div>
						<a class="dropdown-item d-flex align-items-center py-2" href="/user/profile/overview"><i class="mdi mdi-account-outline text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">My Profile</span></a>
						<a class="dropdown-item d-flex align-items-center py-2" href="/user/profile/edit/info"><i class="mdi mdi-cog-outline text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Account Settings</span></a>
						<button type="button" class="dropdown-item py-2 border-top" onclick="location.href='/logout/'"><i class="bi bi-box-arrow-right"></i> Sign Out</button>
					</div>
				</div>
				<div class="topbar-divider d-none d-sm-block"></div>
				<button type="button" onclick="javascript:toggleFullScreen()" class="btn d-flex align-items-center fs-5">
					<i class="bi bi-arrows-fullscreen"></i> <span class="sr-only">Full Screen</span>
				</button>
				<div class="d-inline-block  ms-2">
					<button type="button" class="btn d-flex align-items-center fs-4" onclick="location.href='/logout/'">
						<i class="bi bi-power"></i> <span class="sr-only">Logout</span>
					</button>
				</div>
			</div><!-- e : My 계정 정보/로그아웃 -->

		</div>
	</header>


	<!-- ========== Left Sidebar Start ========== -->
	<div class="vertical-menu">
		<!-- s : LOGO -->
		<div class="navbar-brand-box">
			<a href="/" class="logo">
				<span class="logo-sm">
					<img src="{% static 'assets/images/OncoTrack_Logo.png' %}" alt="logo" height="28">
				</span>
				<span class="logo-lg r">
					<p class="d-flex align-items-center mb-0">
						<img src="{% static 'assets/images/OncoTrack_Logo.png' %}" alt="logo" height="28">
						<u class="logo-txt mx-2">&nbsp;</u>
					</p>
				</span>
			</a>
		</div><!-- e : LOGO -->

		<!-- <button type="button" class="btn btn-sm px-3 font-size-16 header-item vertical-menu-btn">
			<i class="fa fa-fw fa-bars"></i>
		</button> -->

		<div data-simplebar class="sidebar-menu-scroll">

			<!--- Sidemenu -->
			<div id="sidebar-menu">
				<!-- Left Menu Start  -->
				<ul class="metismenu list-unstyled" id="accordion">
					<li>
						<a href="/">
							<i class="bi bi-display"></i>
							<span class="menu-item">Dashboard</span>
						</a>
					</li>
					<li>
						<a data-bs-toggle="collapse" href="#menu-2" class="accordion-button collapsed" aria-expanded="false">
							<i class="bi bi-pencil-square"></i>
							<span class="menu-item">Studies</span>
						</a>
						<div id="menu-2" class="collapse" data-bs-parent="#accordion">
							<ul class="nav flex-column sub-menu">
                              {% if user.id in onco_team and job_title == 'doctor' %}
                                <li>
                                  <a href="/research/search/?PI={{user.first_name}}"><i></i> 임상 연구</a>
                                </li>
                              {% elif user.id in onco_team and job_title == 'nurse' %}
                                <li>
                                  <a href="/research/search/?crc={{ user.id }}"><i></i> 임상 연구</a>
                                </li>
                              {% else %}
								<li>
									<a href="/research/search/"><i></i> 임상 연구</a>
								</li>
                              {% endif %}

                              {% if user.id in onco_team and job_title == 'nurse' and user.contact.team.name == 'CLUE' %}
                                <li>
									<a href="/research/pre_initiation/?team=CLUE"><i></i> 개시 연구</a>
								</li>
                              {% elif user.id in onco_team and job_title == 'nurse' and user.contact.team.name == 'GSI' %}
                                <li>
									<a href="/research/pre_initiation/?team=CLUE"><i></i> 개시 연구</a>
								</li>
                              {% elif user.id in onco_team and job_title == 'nurse' and user.contact.team.name == 'etc' %}
                                <li>
									<a href="/research/pre_initiation/?team=CLUE"><i></i> 개시 연구</a>
								</li>
                              {% else %}
								<li>
									<a href="/research/pre_initiation/"><i></i> 개시 연구</a>
								</li>
                              {% endif %}

								<li>
									<a href="/research/end_study/"><i></i> 종료 보고 이후 연구</a>
								</li>
							</ul>
						</div>
					</li>
					<li>
                      {% if user.id in onco_team and job_title == 'nurse' and user.contact.team.name == 'CLUE' %}
						<a href="/research/CRC/list/?team=CLUE&from_month_date={{ from_month_date|date:'Y-m-d' }}&to_month_date={{ to_month_date|date:'Y-m-d' }}">
                      {% elif user.id in onco_team and job_title == 'nurse' and user.contact.team.name == 'GSI' %}
                        <a href="/research/CRC/list/?team=GSI&from_month_date={{ from_month_date|date:'Y-m-d' }}&to_month_date={{ to_month_date|date:'Y-m-d' }}">
                      {% elif user.id in onco_team and job_title == 'nurse' and user.contact.team.name == 'etc' %}
                        <a href="/research/CRC/list/?team=etc&from_month_date={{ from_month_date|date:'Y-m-d' }}&to_month_date={{ to_month_date|date:'Y-m-d' }}">
                      {% else %}
                        <a href="/research/CRC/list/">
                      {% endif %}
							<i class="bi bi-clipboard2-data"></i>
							<span class="menu-item">CRC</span>
						</a>
					</li>
					<li>
						<a href="/miscellaneous/supporting/">
							<i class="bi bi-droplet"></i>
							<span class="menu-item">Blood Sample</span>
						</a>
					</li>
					<li>
						<a data-bs-toggle="collapse" href="#menu-5" class="accordion-button collapsed">
							<i class="bi bi-hdd"></i>
							<span class="menu-item">Dataroom</span>
						</a>
						<div id="menu-5" class="collapse" data-bs-parent="#accordion">
							<ul class="nav flex-column sub-menu">
								<li><a href="/dataroom/data/?cancer=phase1"><i></i> Phase1</a></li>
								<li><a href="/dataroom/data/?cancer=CRC"><i></i> 대장암</a></li>
								<li><a href="/dataroom/data/?cancer=stomach"><i></i> 위암</a></li>
								<li><a href="/dataroom/data/?cancer=melanoma"><i></i> 흑색종</a></li>
								<li><a href="/dataroom/data/?cancer=sarcoma"><i></i> 육종암</a></li>
								<li><a href="/dataroom/data/?cancer=urological"><i></i> 비뇨기암</a></li>
								<li><a href="/dataroom/data/?cancer=pancreatic"><i></i> 간담췌암</a></li>
							</ul>
						</div>
					</li>
					{% if user.is_superuser == 1 %}
					<li>
						<a data-bs-toggle="collapse" href="#menu-6" class="accordion-button collapsed" aria-expanded="false">
							<i class="bi bi-bar-chart-line"></i>
							<span class="menu-item">STAT</span>
						</a>
						<div id="menu-6" class="collapse" data-bs-parent="#accordion">
							<ul class="nav flex-column sub-menu">
								<li>
									<a href="/research/ETC_statistic/"><i></i> Performance</a>
								</li>
								<li>
									<a href="/research/ETC_statistic/"><i></i> 데이터 미입력</a>
								</li>
								<li>
									<a href="/research/PI_statistic/"><i></i> PI</a>
								</li>
								<li>
									<a href="/research/CRC_statistic/"><i></i> CRC</a>
								</li>
							</ul>
						</div>
					</li>
                    {% endif %}
                    {% if user.is_superuser == 1 or job_title == 'QC' %}
					<li>
						<a href="/miscellaneous/QC/">
							<i class="bi bi-file-medical"></i>
							<span class="menu-item">QC</span>
						</a>
					</li>
                    {% endif %}
					<li>
						<a data-bs-toggle="collapse" href="#menu-8" class="accordion-button collapsed">
							<i class="bi bi-people"></i>
							<span class="menu-item">Staff</span>
						</a>
						<div id="menu-8" class="collapse" data-bs-parent="#accordion">
							<ul class="nav flex-column sub-menu">
								<li>
									<a href="/user/list/"><i></i> 연락처</a>
								</li>
								<li>
									<a href="/leave/calendar/"><i></i> 휴가</a>
								</li>
								<li>
									<a href="/dataroom/educational_material/"><i></i> 교육자료</a>
								</li>
								<li>
									<a href="/dataroom/certification/"><i></i> Certification</a>
								</li>
							</ul>
						</div>
					</li>
					{% if user.is_superuser == 1%}
					<li>
						<a data-bs-toggle="collapse" href="#menu-9" class="accordion-button collapsed">
							<i class="bi bi-gear"></i>
							<span class="menu-item">Admin</span>
						</a>
						<div id="menu-9" class="collapse" data-bs-parent="#accordion">
							<ul class="nav flex-column sub-menu">
								<li>
									<a href="/administration/organization"><i></i> 기관 정보</a>
								</li>
								<li>
									<a href="/administration/user"><i></i> 사용자 정보</a>
								</li>
								<li>
									<a href="/administration/company"><i></i> 회사 정보</a>
								</li>
								<li>
									<a href="/administration/study_set_up"><i></i> Study Set-up</a>
								</li>
								<li>
									<a href="/administration/cancer_image_set_up"><i></i> Cancer Image Set-up</a>
								</li>
								<li>
									<a href="/administration/notice"><i></i> Notice</a>
								</li>
								<li>
									<a href="/administration/commute"><i></i> 출퇴근 관리</a>
								</li>
							</ul>
						</div>
					</li>
                    {% endif %}
				</ul>
			</div>
			<!-- Sidebar -->
		</div>
	</div>
	<!-- Left Sidebar End -->



	<!-- ============================================================== -->
	<!-- Start right Content here -->
	<!-- ============================================================== -->
	<div class="main-content">
		<div class="page-content">
			<div class="container-fluid">
				<div class="bg-overlay bg-white"></div>

				<!-- start page title -->
				<div class="row">
					<div class="col-12">
						<div class="page-title-box d-flex align-items-center justify-content-between">
							<h2>QC</h2>
							<button id="print" type="button" class="btn btn-outline-secondary print_btn"><i class="bi bi-printer"></i> <span class="invisible-">화면 프린트</span></button>

							<div class="page-nav">
								<ul class="breadcrumb">
									<li class="breadcrumb-item"><a href="/"> <i class="bi bi-house"></i> </a></li>
									<li class="breadcrumb-item"><a href="/miscellaneous/QC/">QC</a></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<!-- end page title -->

				<!-- start contents-area -->
				<div class="row" id="printArea">
					<div class="col-12">
						<div class="info-box mb-4">
							<div class="row row-cols-auto align-items-center header-btns">
								<div class="col" >
									<h4 class="sub-title mb-3">
										<span class="tit">
											Vendor에 따른 연구별/CRC/PI별 Query 종류 및 개수
											{% if from_date %} {% else %} ({{first_day|date:'Y'}}년 {{first_day|date:'m'}}월) {% endif %}
										</span>
									</h4>
									<div class="fulldetalil-search">
										<form action="/miscellaneous/QC" method="GET" class="mt-4 mb-1">
											<div class="form-group">
												<div class="form-cons">
													<div class="form-check-area">
														<div class="item ps-0">
															<div class="form-check form-check-success">
																<label class="form-check-label">
																	<input type="radio" class="form-check-input" name="optionRadios" value="total" id="search_all"
																		   {% if option_radio != 'period' %} checked {% endif %}/>
																	<i class="input-helper"></i><span class="form-check-sign">전체</span>
																</label>
															</div>
														</div>
														<div class="item">
															<div class="form-check form-check-success">
																<label class="form-check-label">
																	<input type="radio" class="form-check-input" name="optionRadios" value="period" id="search_period"
																			{% if option_radio == 'period' %} checked {% endif %}/>
																	<i class="input-helper"></i><span class="form-check-sign">기간</span>
																</label>
															</div>
														</div>
													</div>
													<div class="input-group">
														<input type="text" id="fromDate" name="from_date" class="form-control datepicker" autocomplete="off" data-calendar="false" value={{from_date|default_if_none:''}}>
														<label for="fromDate" class="input-group-text"><i class="bi bi-calendar-check"></i></label>
													</div>
													<div class="dash px-2"><span> ~ </span></div>
													<div class="input-group">
														<input type="text" id="toDate" name="to_date" class="form-control datepicker" autocomplete="off" data-calendar="false" value={{to_date|default_if_none:''}}>
														<label for="toDate" class="input-group-text"><i class="bi bi-calendar-check"></i></label>
													</div>
													<button type="submit" class="btn btn-success btn-sm edit-btn px-3 py-2 ms-1 search-btn"><i class="bi bi-search"></i> <span class="sr-only-">조회</span></button>
												</div>
											</div>
										</form>
									</div>
								</div>
								<div class="col ms-auto">
									<button type="button" class="btn btn-success edit-btn px-4" onclick="location.href='/miscellaneous/QC/add/'">
										<i class="bi bi-plus-square"></i> <span>Add</span>
									</button>
								</div>
							</div>
						</div>

						<div class="info-box2 type2 mb-5">
							<div class="row">
								<div class="col-6 table-box">
									<div class="table-con">
										<!-- 다중선택되는 select박스로 검색하기 -->
										<div class="row row-cols-auto select-action">
											<h5>Vendor에 따른 연구별 쿼리 종류 및 개수</h5>
											<div class="col ms-auto d-flex">
												<div class="inline">
													<select id="table-filter" class="form-select">
														<option value="" selected="">Vendor</option>
													</select>
												</div>
												<div class="inline ms-1">
													<select id="table-filter2" class="form-select">
														<option value="">Study Name</option>
														<option value=""></option>
													</select>
												</div>
											</div>
										</div>

										<div class="table-responsive default-table">
											<table class="table" id="qcvendorTable01" >
												<thead>
													<tr>
														<th>Vendor</th>
													    <th>Study Name</th>
													    <th>Query Type</th>
													    <th>Number of queries</th>
													</tr>
												</thead>
												<tbody>
												  {% for QC in QC_by_research %}
													<tr class="tr-hover table-link QC" QC-id="{{ QC.id }}">
													  <td>{{ QC.vendor__value }}</td>
													  <td>{{ QC.research__research_name }}</td>
													  <td>{{ QC.QC_category }}</td>
													  <td>{{ QC.QcCount }}</td>
													</tr>
												  {% endfor %}
												</tbody>
											</table>
										</div><!-- //table-responsive -->
									</div>
								</div>
								<div class="col-6 chart-box">
									<div class="chart-con">
										<div class="query_by_research_graph"></div>
									</div>
								</div>
							</div>
						</div>


						<div class="info-box2 type2 mb-5">
							<div class="row">
								<div class="col-6 table-box">
									<div class="table-con">
										<!-- 다중선택되는 select박스로 검색하기 -->
										<div class="row row-cols-auto select-action">
											<h5>Vendor에 따른 CRC별 쿼리 종류 및 개수</h5>
											<div class="col ms-auto d-flex">
												<div class="inline">
													<select id="table-filter3" class="form-select">
														<option value="" selected="">Vendor</option>
													</select>
												</div>
												<div class="inline ms-1">
													<select id="table-filter4" class="form-select">
														<option value="">CRC</option>
														<option value=""></option>
													</select>
												</div>
											</div>
										</div>

										<div class="table-responsive default-table">
											<table class="table" id="qcvendorTable02" >
												<thead>
													<tr>
														<th>Vendor</th>
													    <th>CRC</th>
													    <th>Query Type</th>
													    <th>Number of queries</th>
													</tr>
												</thead>
												<tbody>
												  {% for QC in QC_by_crc %}
													<tr class="tr-hover table-link QC" QC-id="{{ QC.id }}">
													  <td>{{ QC.vendor__value }}</td>
													  <td>{{ QC.crc__name }}</td>
													  <td>{{ QC.QC_category }}</td>
													  <td>{{ QC.QcCount }}</td>
													</tr>
												  {% endfor %}
												</tbody>
											</table>
										</div><!-- //table-responsive -->
									</div>
								</div>
								<div class="col-6 chart-box">
									<div class="chart-con">
										<div class="query_by_CRC_graph"></div>
									</div>
								</div>
							</div>
						</div>


						<div class="info-box2 type2 mb-5">
							<div class="row">
								<div class="col-6 table-box">
									<div class="table-con">
										<!-- 다중선택되는 select박스로 검색하기 -->
										<div class="row row-cols-auto select-action">
											<h5>Vendor에 따른 PI별 쿼리 종류 및 개수</h5>
											<div class="col ms-auto d-flex">
												<div class="inline">
													<select id="table-filter5" class="form-select">
														<option value="" selected="">Vendor</option>
													</select>
												</div>
												<div class="inline ms-1">
													<select id="table-filter6" class="form-select">
														<option value="">PI</option>
														<option value=""></option>
													</select>
												</div>
											</div>
										</div>

										<div class="table-responsive default-table">
											<table class="table" id="qcvendorTable03" >
												<thead>
													<tr>
														<th>Vendor</th>
													    <th>PI</th>
													    <th>Query Type</th>
													    <th>Number of queries</th>
													</tr>
												</thead>
												<tbody>
												  {% for QC in QC_by_PI %}
													<tr class="tr-hover table-link QC" QC-id="{{ QC.id }}">
													  <td>{{ QC.vendor__value }}</td>
													  <td>{{ QC.research__PI }}</td>
													  <td>{{ QC.QC_category }}</td>
													  <td>{{ QC.QcCount }}</td>
													</tr>
												  {% endfor %}
												</tbody>
											</table>
										</div><!-- //table-responsive -->
									</div>
								</div>
								<div class="col-6 chart-box">
									<div class="chart-con">
										<div class="query_by_PI_graph"></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- end contents-area -->
			</div>
			<!-- container-fluid -->
		</div>
		<!-- End Page-content -->

		<footer class="footer">
			<div class="container-fluid">
				<div class="row">
					<!--
					<div class="col-sm-12 text-center">
						<script>document.write(new Date().getFullYear())</script> &copy; Oncology CR.
					</div>
					-->
				</div>
			</div>
		</footer>
	</div>
	<!-- end main content-->

</div>
<!-- END layout-wrapper -->

<!-- JAVASCRIPT -->
<script src="{% static 'assets/libs/jquery/jquery.min.js' %}"></script>
<script src="{% static 'assets/libs/bootstrap/js/bootstrap.bundle.min.j' %}s"></script>
<script src="{% static 'assets/libs/simplebar/simplebar.min.js' %}"></script>

<!-- plugin js -->
<script src="{% static 'assets/js/plugins.js' %}"></script>

<!-- 커스텀 js -->
<script src="{% static 'assets/js/active.js' %}"></script>

<!-- studies 페이지용 js -->
<script src="{% static 'assets/js/pages/qc.js' %}"></script>
<script src="{% static 'js/CRUD/supporting_detail.js' %}"></script>
<script>
      $('input[type=radio][name=optionRadios]').on('change',function () {
        var chkValue = $('input[type=radio][name=optionRadios]:checked').val();

        if(chkValue == 'total'){
            $( '#fromDate' ).attr('disabled', 'disabled').val('');
            $( '#toDate' ).attr('disabled', 'disabled').val('');

        }
        else {
            $( '#fromDate' ).removeAttr('disabled');
            $( '#toDate' ).removeAttr('disabled');
        }
      });

      $(function() {
			$(".datepicker").datepicker({
			todayHighlight: true,
			showMonthAfterYear: true,
			format: 'yyyy-mm-dd', // 날짜 형식
			autoclose: true, // 날짜 선택 후 자동으로 닫힘
			minViewMode: 'months', // 최소 선택 단위 (월)
			language: 'ko', // 한국어 지원
			}).on('changeDate', function (e) {
				// 시작일과 종료일 입력 필드를 구분하기 위해 데이터 속성을 활용합니다.
				var inputId = $(this).attr('id');
				if (inputId === 'fromDate') {
					// 시작일이 변경된 경우, 종료일을 설정합니다.
					var selectedDate = e.date;
					var endPicker = $('#toDate');
					var lastDay = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + 1, 0);
					endPicker.datepicker('setDate', lastDay);
				}
			});
	  });


      var options = {
	    chart: {
                type: 'bar',
                stacked: true,
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        position: 'top',
                    },
                }
            },
            colors: ['#5E50F9', '#46c35f', '#fcb41d', '#57c7d4', '#f6e84e', '#aab2bd', '#E91E63'],
            dataLabels: {
                enabled: true,
                formatter: function (val) {
                    return val ;
                },
                style: {
                    fontSize: '11px',
                    colors: ["#304758"]
                }
            },
	    series: [{
                name: '입력 오류 - AE 관련',
                data: {{ query_by_research_dict.AE | safe }}
            },
            {
                name: '입력 오류 - RECIST 관련',
                data: {{ query_by_research_dict.RECIST | safe }}
            },
            {
                name: '입력 오류 - LAB 관련',
                data: {{ query_by_research_dict.LAB | safe }}
            },
            {
                name: '입력 오류 - 투약 관련',
                data: {{ query_by_research_dict.DOSAGE | safe }}
            },
            {
                name: '입력 오류 - 기타',
                data: {{ query_by_research_dict.ERROR_ETC | safe }}
            },
            {
                name: '입력 누락 - cycle',
                data: {{ query_by_research_dict.CYCLE | safe }}
            },
            {
                name: '입력 누락 - 기타',
                data: {{ query_by_research_dict.OMISSION_ETC | safe }}
            }
            ],
            xaxis: {
                categories: {{ research_list |safe }},
                position: 'bottom',
                labels: {
                    offsetY: -4,

                },
                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false
                },
                crosshairs: {
                    fill: {
                        type: 'gradient',
                        gradient: {
                            colorFrom: '#D8E3F0',
                            colorTo: '#BED1E6',
                            stops: [0, 100],
                            opacityFrom: 0.4,
                            opacityTo: 0.5,
                        }
                    }
                },
                tooltip: {
                    enabled: false,
                }
            },
            fill: {
                gradient: {
                    shade: 'light',
                    type: "horizontal",
                    shadeIntensity: 0.25,
                    gradientToColors: undefined,
                    inverseColors: true,
                    opacityFrom: 1,
                    opacityTo: 1,
                    stops: [50, 0, 100, 100]
                },
            },
            yaxis:
            [
              {
		        seriesName: 'query_by_research_dict.TOTAL',
                axisBorder: {
                  show: true,
                  color: '#008FFB'
                },
                labels: {
                  style: {
                    colors: '#008FFB',
                  }
                },
                title: {
                    text: "Counts",
                    style: {
                        fontSize: '15px',
                        color: '#008FFB',
                    }
                },
              },
            ],
        }

        var query_by_research = new ApexCharts(
            document.querySelector(".query_by_research_graph"),
            options
        );
        query_by_research.render();

        var options2 = {
	    chart: {
                type: 'bar',
                stacked: true,
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        position: 'top',
                    },
                }
            },
            colors: ['#5E50F9', '#46c35f', '#fcb41d', '#57c7d4', '#f6e84e', '#aab2bd', '#E91E63'],
            dataLabels: {
                enabled: true,
                formatter: function (val) {
                    return val ;
                },
                style: {
                    fontSize: '11px',
                    colors: ["#304758"]
                }
            },
	    series: [{
                name: '입력 오류 - AE 관련',
                data: {{ query_by_CRC_dict.AE | safe }}
            },
            {
                name: '입력 오류 - RECIST 관련',
                data: {{ query_by_CRC_dict.RECIST | safe }}
            },
            {
                name: '입력 오류 - LAB 관련',
                data: {{ query_by_CRC_dict.LAB | safe }}
            },
            {
                name: '입력 오류 - 투약 관련',
                data: {{ query_by_CRC_dict.DOSAGE | safe }}
            },
            {
                name: '입력 오류 - 기타',
                data: {{ query_by_CRC_dict.ERROR_ETC | safe }}
            },
            {
                name: '입력 누락 - cycle',
                data: {{ query_by_CRC_dict.CYCLE | safe }}
            },
            {
                name: '입력 누락 - 기타',
                data: {{ query_by_CRC_dict.OMISSION_ETC | safe }}
            }
            ],
            xaxis: {
                categories: {{ CRC_list |safe }},
                position: 'bottom',
                labels: {
                    offsetY: -4,

                },
                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false
                },
                crosshairs: {
                    fill: {
                        type: 'gradient',
                        gradient: {
                            colorFrom: '#D8E3F0',
                            colorTo: '#BED1E6',
                            stops: [0, 100],
                            opacityFrom: 0.4,
                            opacityTo: 0.5,
                        }
                    }
                },
                tooltip: {
                    enabled: false,
                    offsetY: -35,
                }
            },
            fill: {
                gradient: {
                    shade: 'light',
                    type: "horizontal",
                    shadeIntensity: 0.25,
                    gradientToColors: undefined,
                    inverseColors: true,
                    opacityFrom: 1,
                    opacityTo: 1,
                    stops: [50, 0, 100, 100]
                },
            },
            yaxis:
            [
              {
		        seriesName: 'query_by_CRC_dict.TOTAL',
                axisBorder: {
                  show: true,
                  color: '#008FFB'
                },
                labels: {
                  style: {
                    colors: '#008FFB',
                  }
                },
                title: {
                    text: "Counts",
                    style: {
                        fontSize: '15px',
                        color: '#008FFB',
                    }
                },
              },
            ],
        }

        var query_by_CRC = new ApexCharts(
            document.querySelector(".query_by_CRC_graph"),
            options2
        );
        query_by_CRC.render();

        var options3 = {
	    chart: {
                type: 'bar',
                stacked: true,
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        position: 'top',
                    },
                }
            },
            colors: ['#5E50F9', '#46c35f', '#fcb41d', '#57c7d4', '#f6e84e', '#aab2bd', '#E91E63'],
            dataLabels: {
                enabled: true,
                formatter: function (val) {
                    return val ;
                },
                style: {
                    fontSize: '11px',
                    colors: ["#304758"]
                }
            },
	    series: [{
                name: '입력 오류 - AE 관련',
                data: {{ query_by_PI_dict.AE | safe }}
            },
            {
                name: '입력 오류 - RECIST 관련',
                data: {{ query_by_PI_dict.RECIST | safe }}
            },
            {
                name: '입력 오류 - LAB 관련',
                data: {{ query_by_PI_dict.LAB | safe }}
            },
            {
                name: '입력 오류 - 투약 관련',
                data: {{ query_by_PI_dict.DOSAGE | safe }}
            },
            {
                name: '입력 오류 - 기타',
                data: {{ query_by_PI_dict.ERROR_ETC | safe }}
            },
            {
                name: '입력 누락 - cycle',
                data: {{ query_by_PI_dict.CYCLE | safe }}
            },
            {
                name: '입력 누락 - 기타',
                data: {{ query_by_PI_dict.OMISSION_ETC | safe }}
            }
            ],
            xaxis: {
                categories: {{ PI_list |safe }},
                position: 'bottom',
                labels: {
                    offsetY: -4,

                },
                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false
                },
                crosshairs: {
                    fill: {
                        type: 'gradient',
                        gradient: {
                            colorFrom: '#D8E3F0',
                            colorTo: '#BED1E6',
                            stops: [0, 100],
                            opacityFrom: 0.4,
                            opacityTo: 0.5,
                        }
                    }
                },
                tooltip: {
                    enabled: false,
                    offsetY: -35,
                }
            },
            fill: {
                gradient: {
                    shade: 'light',
                    type: "horizontal",
                    shadeIntensity: 0.25,
                    gradientToColors: undefined,
                    inverseColors: true,
                    opacityFrom: 1,
                    opacityTo: 1,
                    stops: [50, 0, 100, 100]
                },
            },
            yaxis:
            [
              {
		        seriesName: 'query_by_PI_dict.TOTAL',
                axisBorder: {
                  show: true,
                  color: '#008FFB'
                },
                labels: {
                  style: {
                    colors: '#008FFB',
                  }
                },
                title: {
                    text: "Counts",
                    style: {
                        fontSize: '15px',
                        color: '#008FFB',
                    }
                },
              },
            ],
        }

        var query_by_PI = new ApexCharts(
            document.querySelector(".query_by_PI_graph"),
            options3
        );
        query_by_PI.render();
</script>

<!-- edit & add js//무조건 제일 하단에 위치해야함! -->
<script src="{% static 'assets/js/edit.js' %}"></script>

<!-- rowspan tabele js //무조건 제일 하단에 위치해야함!-->
<script src="{% static 'assets/js/rowspan.js' %}"></script>

{% endwith %}
</body>
</html>