{% extends "bases/base_generic.html" %}
{% load get_o2m_values from research_tag %}
{% load chunks from research_tag %}
{% load static %}

{% block title %}
  <title>X-OncoTrack</title>
{% endblock %}

{% block content %}
  <div class="row">
    <div class="col-sm-12 mb-4 mb-xl-0">
      <h4 class="font-weight-bold text-dark"><a href="/research/{{ research.id }}">{{ research.research_name }}</a> - Add or Edit</h4>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-header">
          <h4 class="card-title pt-1" style="margin:0;">Vendor 정보</h4>
        </div>
        <div class="card-body">
          <form id="research-add-form" class="forms-sample" method="post"
                action="/miscellaneous/vendor/{{ research.id }}/edit/"
                enctype="multipart/form-data">
            {% csrf_token %}

            <div class="form-group row {% if 'cro' in errors %} card-inverse-danger {% endif %}">
              <label for="cro" class="font-weight-bold col-sm-2 col-form-label pl-3 striped" style="color:black;">CRO
                {% autoescape off %}
                  {% if 'cro' in errors %}
                    <div class="text-danger small"
                         style="line-height: 1rem;">{{ errors.cro }}</div>
                  {% endif %}
                {% endautoescape %}
              </label>
              <div class="col-sm-10 form-input-container radio-radio-input">
                <div style="display:flex; justify-content: left; flex-wrap:wrap;">
                  {% for chunk in field_choice.cro|chunks:8 %}
                  <div class="cancer-type-category border-0">
                    {% for value, text in chunk %}
                        <div class="form-check" style="margin-right: 30px;">
                          <label class="form-check-label">
                            <input type="radio" style="padding:10px"
                                   class="form-check-input" name="cro" value="{{ value }}"
                                {% if value == research_management.cro|get_o2m_values %}
                                   checked {% endif %}
                                {% if not editable %} disabled {% endif %}>
                            <i class="input-helper"></i><span>{{ text }}</span>
                          </label>
                        </div>
                    {% endfor %}
                  </div>
                  {% endfor %}
                </div>
              </div>
            </div>

            <div class="form-group row {% if 'vendor' in errors %} card-inverse-danger {% endif %}">
              {% include 'pages/miscellaneous/vendor/vendor_add_edit_form/_vendor.html' %}
            </div>

            <div class="mt-2" style="text-align:right;">
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block custom_end %}
  {#  <script src="{% static 'js/CRUD/research_add.js' %}"></script>#}
{% endblock %}
